<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GomaMap - Carte détaillée</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.css">
</head>
<body>
<div id='map' style='height: 500px; width: 100%;'></div>

    <header>
        <h1>Carte détaillée de la ville de Goma</h1>
    </header>
    <main>
        <div class="rechercher_endroit">
            <input type="text" name="" id="searchInput" placeholder="Rechercher un lieu...">
        </div>
        <div id="map"></div>
        <div class="file-input">
            <label for="fileInput">Charger un fichier (GPX, KML, GeoJSON) :</label>
            <input type="file" id="fileInput" accept=".geojson,.gpx,.kml">
        </div>
        <div class="buttons">
            <button id="locateBtn">Localiser ma position</button>
            <button id="routeBtn">Afficher itinéraire</button>
        </div>
    </main>
    <footer>
        <p>&copy; 2024 - GomaMap</p>
    </footer>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://unpkg.com/togeojson"></script>
    <script src="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.js"></script>
    <script src="script.js"></script>
</body>
</html>
<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places"></script>
<script>
  let map;
  let directionsService;
  let directionsRenderer;
  let placesService;

  function initMap() {
    // Initialize the map
    map = new google.maps.Map(document.getElementById('map'), {
      center: { lat: -1.286389, lng: 36.817223 }, // Nairobi by default
      zoom: 12,
    });

    // Initialize Directions and Places services
    directionsService = new google.maps.DirectionsService();
    directionsRenderer = new google.maps.DirectionsRenderer();
    placesService = new google.maps.places.PlacesService(map);
    directionsRenderer.setMap(map);

    // Example: Add functionality to find nearby places
    findNearbyPlaces('restaurant');
  }

  function findNearbyPlaces(type) {
    const request = {
      location: map.getCenter(),
      radius: 5000,
      type: type,
    };
    placesService.nearbySearch(request, (results, status) => {
      if (status === google.maps.places.PlacesServiceStatus.OK) {
        results.forEach((place) => {
          if (place.geometry && place.geometry.location) {
            new google.maps.Marker({
              position: place.geometry.location,
              map: map,
              title: place.name,
            });
          }
        });
      }
    });
  }

  function calculateOptimizedRoute(origin, destination) {
    const request = {
      origin: origin,
      destination: destination,
      travelMode: google.maps.TravelMode.DRIVING,
      optimizeWaypoints: true,
    };
    directionsService.route(request, (result, status) => {
      if (status === google.maps.DirectionsStatus.OK) {
        directionsRenderer.setDirections(result);
      }
    });
  }
</script>
